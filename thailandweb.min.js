(function(a){a.fn.thailandweb=function(c){var b=a.extend({selector:a(this),tbname:"webnews"},c);return this.each(function(){var e;var f="thailandweb.json";a(function(){d()});function d(){a.ajax({type:"GET",url:f,dataType:"json",success:function(g){var h=["webeducation","webnews","webprovinces"];if(a.inArray(b.tbname,h)==-1){a(b.selector).append('<option value="">'+g.webthailand[b.tbname].title+"</option>");a.each(g.webthailand[b.tbname].data,function(i,j){a(b.selector).append('<option value="'+j.link+'">'+j.name+"</option>")})}else{a(b.selector).append('<option value="">'+g.webthailand[b.tbname].title+"</option>");a.each(g.webthailand[b.tbname].data,function(i,j){a(b.selector).append('<optgroup label="=='+j.type+'==">');a.each(j.data,function(k,l){a(b.selector).append('<option value="'+l.link+'">'+l.name+"</option>")})})}a(b.selector).change(function(j){var i=a(this).val();if(i!=="undefined"){window.location.href=i}})},error:function(){console.log("Failed to get json")}})}})}})(jQuery);